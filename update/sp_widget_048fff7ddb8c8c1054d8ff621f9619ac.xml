<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[function($scope,$location, $timeout, spModal, spUtil) {
  /* widget controller */
  var c = this;
	var s = $location.search();
	
	c.biopsyDisplay = false;
	c.cancerDisplay = false;
	c.showWidget = false;
	
	window.displayThankYou = function(){
		
		var obj = document.getElementById('thank_you');
		if(obj.style.display == 'none'){
			obj.style.display = 'block';
		}
	}
	
	/*
	setTimeout(function(){
		var button_bar = $('#submit_div div.panel-footer');
		button_bar.children().last().remove();
		var button = button_bar.children().last();
		button_bar.append('<button type="submit" onClick="displayThankYou()" class="btn btn-primary action-btn ng-scope" style="background-color:green;">Submit</button>');
		//$('<button type="submit" onClick="displayThankYou()" class="btn btn-primary action-btn ng-scope">Submit</button>').insertBefore(button);
	}, 0);
	
	*/
	
	c.showView = function(idx){
		c.show_view_index = idx;
		if(idx != 1){
			var view = "SignatureAndSubmit";
			if(idx == 2){
				view = "SectionA";
				c.showWidget = true;
			}
			else if(idx == 3){
				view = "SectionB1";
				c.showWidget = true;
			}
			else if(idx == 4){
				view = "SectionB2";
				c.showWidget = true;
			}
			else if(idx == 5){
				view = "SectionB3";
				c.showWidget = true;
			}
			else if(idx == 6){
				view = "SectionB4";
				c.showWidget = true;
			}
			else if(idx == 7){
				view = "SignatureAndSubmit";
				c.showWidget = true;
			}
			
			spUtil.get("widget-form", {
				"sys_id": c.data.sys_id,
				"table": "x_naci_family_coho_individual_information_questionnaire",
				"view": view
			}).then(function(response) {
				c.widget = response;
				
			})
		}
	}
	
	spUtil.get("widget-form", {
				"sys_id": c.data.sys_id,
				"table": "x_naci_family_coho_individual_information_questionnaire",
				"view": "SectionB2"
			}).then(function(response) {
				c.data.widget = response;
			})
	
	/*
	
	$scope.$on('spModel.fields.rendered', function(e, gFormInstance) {
		console.log(e.targetScope);
		if(e.targetScope.formModel.view == "SectionB1"){
			e.targetScope.$on('field.change.have_biopsy', function(ev, obj) {
				console.log("value Changed");
				console.log(obj);
				console.log();
				if(obj.newValue == 'YES'){
					c.biopsyDisplay = true;
				}
				else{
					c.biopsyDisplay = false;
				}
			});
			e.targetScope.$on('field.change.diagnosed_with_any_cancer', function(ev, obj) {
				console.log("value Changed");
				console.log(obj);
				console.log();
				if(obj.newValue == 'YES'){
					c.cancerDisplay = true;
				}
				else{
					c.cancerDisplay = false;
				}
			});
		}
	});
	
	*/
	
	/*
	var myVar = setInterval(myTimer, 1000);
	
	function myTimer() {
		var d = document.getElementById('have_biopsy');
		
		if(d){
			console.log("name of proband created!");
			
			myStopFunction();
		}
	}

	function myStopFunction() {
		clearInterval(myVar);
	}
	
	
	$scope.$on('spModel.fields.rendered', function(e, gFormInstance) {
		console.log("Form genereated!!!");
		console.log(e);
		if(e.targetScope.formModel.view == "SectionB"){
			e.targetScope.$on('field.change.have_biopsy', function(ev, obj) {
				console.log("value Changed");
				console.log(ev);
				console.log(obj);
				console.log("1");
			});
		}
	});
	
	
	$scope.$on('field.change.have_biopsy', function(e, obj) {
		console.log("value Changed");
		console.log(e);
	});
	
	
	
	
	spUtil.get("widget-form", {
		"sys_id": "-1",
		"table": "x_naci_family_coho_individual_information_questionnaire",
		"view": "Introduction"
	}).then(function(response) {
			response.data.f.client_script.onLoad = function(){
				console.log('please do something.');
			};
			c.testWidget = response;
		console.log(response);
		console.log('asdfasdfasdf');
	}).then(function(){
		
		$scope.$on('spModel.fields.rendered', function(e, gFormInstance) {
			console.log("Form genereated!!!");
			console.log(e);
			if(e.targetScope.formModel.view == "Introduction"){
				var obj = document.getElementById('name_of_proband');
				console.log(obj);
			}
		});
		
		//var obj = document.getElementById('sp_formfield_date_at_diagnosis');
		//console.log(obj);
	});
	*/
}]]></client_script>
        <controller_as>c</controller_as>
        <css/>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list/>
        <has_preview>false</has_preview>
        <id>fcsms_iiq_form</id>
        <internal>false</internal>
        <link><![CDATA[function link(scope, element, attrs, controller) {  }]]></link>
        <name>FCSMS IIQ Form</name>
        <option_schema/>
        <public>false</public>
        <roles/>
        <script><![CDATA[(function() {
  /* populate the 'data' object */
  /* e.g., data.table = $sp.getValue('table'); */
	var str = gs.action.getGlideURI();
	var sys_id = str.get('sys_id');
	data.sys_id = sys_id;
	/*
	data.widget_0 = $sp.getWidget('widget-form', {
		"sys_id": sys_id,
		"table": "x_naci_family_coho_individual_information_questionnaire",
		"view": "Introduction"
	});
	data.widget_1 = $sp.getWidget('widget-form', {
		"sys_id": sys_id,
		"table": "x_naci_family_coho_individual_information_questionnaire",
		"view": "SectionA"
	});
	data.widget_2 = $sp.getWidget('widget-form', {
		"sys_id": sys_id,
		"table": "x_naci_family_coho_individual_information_questionnaire",
		"view": "SectionB1"
	});
	data.widget_3 = $sp.getWidget('widget-form', {
		"sys_id": sys_id,
		"table": "x_naci_family_coho_individual_information_questionnaire",
		"view": "SectionB2"
	});
	data.widget_4 = $sp.getWidget('widget-form', {
		"sys_id": sys_id,
		"table": "x_naci_family_coho_individual_information_questionnaire",
		"view": "SectionB3"
	});
	data.widget_5 = $sp.getWidget('widget-form', {
		"sys_id": sys_id,
		"table": "x_naci_family_coho_individual_information_questionnaire",
		"view": "SectionB4"
	});
	*/
})();]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>yuw5@nih.gov</sys_created_by>
        <sys_created_on>2019-09-23 16:04:08</sys_created_on>
        <sys_customer_update>false</sys_customer_update>
        <sys_id>048fff7ddb8c8c1054d8ff621f9619ac</sys_id>
        <sys_mod_count>163</sys_mod_count>
        <sys_name>FCSMS IIQ Form</sys_name>
        <sys_package display_value="Family Cohort Study" source="x_naci_family_coho">090e9eb7dba7774054d8ff621f9619eb</sys_package>
        <sys_policy/>
        <sys_replace_on_upgrade>false</sys_replace_on_upgrade>
        <sys_scope display_value="Family Cohort Study">090e9eb7dba7774054d8ff621f9619eb</sys_scope>
        <sys_update_name>sp_widget_048fff7ddb8c8c1054d8ff621f9619ac</sys_update_name>
        <sys_updated_by>yuw5@nih.gov</sys_updated_by>
        <sys_updated_on>2019-10-01 22:19:51</sys_updated_on>
        <template><![CDATA[<div id="table-form" class="container" style="width:80%;font-size: 20px;">
  <div class="left-side-menu">
    <ul>
      <li ng-click="c.showView(1)">Introduction</li>
      <li ng-click="c.showView(2)">Demographic Information</li>
      <li ng-click="c.showView(3)">Biopsy(ies) and Cancer(s)</li>
      <li ng-click="c.showView(4)">Surgery(ies) and Medical Conditions</li>
      <li ng-click="c.showView(5)">Medications and Supplements</li>
      <li ng-click="c.showView(6)">Health Practices</li>
      <li ng-click="c.showView(7)">Signature and Submit</li>
    </ul>
  </div>
  <div class="right-side-content">
    	<div style="padding: 10px;" ng-show="c.show_view_index == 1">
        <h3 style="text-align:center;">
           NATIONAL CANCER INSTITUTE
        <br>
					LI-FRAUMENI SYNDROME STUDY 
				<br>
          INDIVIDUAL INFORMATION QUESTIONNAIRE 
        </h3>
        <p>
        	We appreciate your willingness to participate in the Li-Fraumeni Syndrome Study. As part of this project, we would like to gather some information about your medical history. We will ask you to provide some specific information about aspects of your health that might relate to your own risk of cancer, as well as information about screening tests and procedures you may have had. If you are younger than 18 years old, please have an adult help you to make sure that your answers are complete.  
        </p>	
        <p>
          Completing the questions that follow takes about 45 minutes. Completing this questionnaire is voluntary. Your answers to these questions will help in our research effort. Since answering these questions might involve thinking about how Li-Fraumeni Syndrome has affected yourself and your family, it is possible that it might cause you to feel sad. You will have an opportunity to discuss these feelings with our clinic staff at the time of your visit. If you need to contact us, please call 1-800-518-8474.  
        </p>
        <!--
					<sp-widget widget="c.data.widget_0"></sp-widget>
				-->
      </div>
    	<div style="padding: 10px;" id="form_widget_content" ng-show="c.showWidget">
        <sp-widget widget="c.data.widget"></sp-widget>
      </div>
  </div>
  <!--
	<uib-tabset>
    <uib-tab index="0" heading="Introduction">
      
    </uib-tab>
    <uib-tab index="1" heading="Demographic Information">
      <div style="padding: 10px;">
        <sp-widget widget="c.data.widget_1"></sp-widget>
      </div>
    </uib-tab>
    <uib-tab index="2" heading="Biopsy(ies) and Cancer(s)">
      <div style="padding: 10px;">
        <sp-widget widget="c.data.widget_2"></sp-widget>
        <div ng-show="c.biopsyDisplay" class="div-inset-list">
          <widget id="fcsms_iiq_form_biopsy_list"></widget>
        </div>
        <div ng-show="c.cancerDisplay" class="div-inset-list">
          <widget id="fcsms_iiq_form_cancer_list"></widget>
        </div>
      </div>
    </uib-tab>
    <uib-tab index="3" heading="Surgery(ies) and Medical Conditions">
      <div style="padding: 10px;">
        <sp-widget widget="c.data.widget_3"></sp-widget>
      </div>
    </uib-tab>
    <uib-tab index="4" heading="Medications and Supplements">
      <div style="padding: 10px;">
        <sp-widget widget="c.data.widget_4"></sp-widget>
      </div>
    </uib-tab>
    <uib-tab index="4" heading="Health Practices">
      <div id="submit_div" style="padding: 10px;">
        <sp-widget widget="c.data.widget_5"></sp-widget>
      </div>
    </uib-tab>
  </uib-tabset>
-->
</div>]]></template>
    </sp_widget>
</record_update>
