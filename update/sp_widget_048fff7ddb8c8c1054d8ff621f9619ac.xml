<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[function($scope,$location, $timeout, spModal, spUtil) {
  /* widget controller */
  var c = this;
	var s = $location.search();
	
	c.biopsyDisplay = false;
	
	window.displayThankYou = function(){
		
		var obj = document.getElementById('thank_you');
		if(obj.style.display == 'none'){
			obj.style.display = 'block';
		}
	}
	
	setTimeout(function(){
		var button_bar = $('#submit_div div.panel-footer');
		button_bar.children().last().remove();
		var button = button_bar.children().last();
		button_bar.append('<button type="submit" onClick="displayThankYou()" class="btn btn-primary action-btn ng-scope" style="background-color:green;">Submit</button>');
		//$('<button type="submit" onClick="displayThankYou()" class="btn btn-primary action-btn ng-scope">Submit</button>').insertBefore(button);
	}, 0);
	
	$scope.$on('spModel.fields.rendered', function(e, gFormInstance) {
		console.log(e.targetScope);
		if(e.targetScope.formModel.view == "SectionB"){
			e.targetScope.$on('field.change.have_biopsy', function(ev, obj) {
				console.log("value Changed");
				console.log(obj);
				if(obj & obj.newValue == 'NO'){
					c.biopsyDisplay = true;
				}
			});
		}
	});
	
	/*
	var myVar = setInterval(myTimer, 1000);
	
	function myTimer() {
		var d = document.getElementById('have_biopsy');
		
		if(d){
			console.log("name of proband created!");
			
			myStopFunction();
		}
	}

	function myStopFunction() {
		clearInterval(myVar);
	}
	
	
	$scope.$on('spModel.fields.rendered', function(e, gFormInstance) {
		console.log("Form genereated!!!");
		console.log(e);
		if(e.targetScope.formModel.view == "SectionB"){
			e.targetScope.$on('field.change.have_biopsy', function(ev, obj) {
				console.log("value Changed");
				console.log(ev);
				console.log(obj);
				console.log("1");
			});
		}
	});
	
	
	$scope.$on('field.change.have_biopsy', function(e, obj) {
		console.log("value Changed");
		console.log(e);
	});
	
	
	
	
	spUtil.get("widget-form", {
		"sys_id": "-1",
		"table": "x_naci_family_coho_individual_information_questionnaire",
		"view": "Introduction"
	}).then(function(response) {
			response.data.f.client_script.onLoad = function(){
				console.log('please do something.');
			};
			c.testWidget = response;
		console.log(response);
		console.log('asdfasdfasdf');
	}).then(function(){
		
		$scope.$on('spModel.fields.rendered', function(e, gFormInstance) {
			console.log("Form genereated!!!");
			console.log(e);
			if(e.targetScope.formModel.view == "Introduction"){
				var obj = document.getElementById('name_of_proband');
				console.log(obj);
			}
		});
		
		//var obj = document.getElementById('sp_formfield_date_at_diagnosis');
		//console.log(obj);
	});
	*/
}]]></client_script>
        <controller_as>c</controller_as>
        <css/>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list/>
        <has_preview>false</has_preview>
        <id>fcsms_iiq_form</id>
        <internal>false</internal>
        <link><![CDATA[function link(scope, element, attrs, controller) {  }]]></link>
        <name>FCSMS IIQ Form</name>
        <option_schema/>
        <public>false</public>
        <roles/>
        <script><![CDATA[(function() {
  /* populate the 'data' object */
  /* e.g., data.table = $sp.getValue('table'); */
	data.widget_0 = $sp.getWidget('widget-form', {
		"sys_id": "-1",
		"table": "x_naci_family_coho_individual_information_questionnaire",
		"view": "Introduction"
	});
	data.widget_1 = $sp.getWidget('widget-form', {
		"sys_id": "-1",
		"table": "x_naci_family_coho_individual_information_questionnaire",
		"view": "SectionA"
	});
	data.widget_2 = $sp.getWidget('widget-form', {
		"sys_id": "-1",
		"table": "x_naci_family_coho_individual_information_questionnaire",
		"view": "SectionB"
	});
	
})();]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>yuw5@nih.gov</sys_created_by>
        <sys_created_on>2019-09-23 16:04:08</sys_created_on>
        <sys_customer_update>false</sys_customer_update>
        <sys_id>048fff7ddb8c8c1054d8ff621f9619ac</sys_id>
        <sys_mod_count>85</sys_mod_count>
        <sys_name>FCSMS IIQ Form</sys_name>
        <sys_package display_value="Family Cohort Study" source="x_naci_family_coho">090e9eb7dba7774054d8ff621f9619eb</sys_package>
        <sys_policy/>
        <sys_replace_on_upgrade>false</sys_replace_on_upgrade>
        <sys_scope display_value="Family Cohort Study">090e9eb7dba7774054d8ff621f9619eb</sys_scope>
        <sys_update_name>sp_widget_048fff7ddb8c8c1054d8ff621f9619ac</sys_update_name>
        <sys_updated_by>yuw5@nih.gov</sys_updated_by>
        <sys_updated_on>2019-09-27 22:39:44</sys_updated_on>
        <template><![CDATA[<div id="table-form" class="container" style="width:80%;font-size: 20px;">
	<uib-tabset>
    <uib-tab index="0" heading="Introduction">
      <div style="padding: 10px;">
        <h3 style="text-align:center;">
           NATIONAL CANCER INSTITUTE
        <br>
					LI-FRAUMENI SYNDROME STUDY 
				<br>
          INDIVIDUAL INFORMATION QUESTIONNAIRE 
        </h3>
        <p>
        	We appreciate your willingness to participate in the Li-Fraumeni Syndrome Study. As part of this project, we would like to gather some information about your medical history. We will ask you to provide some specific information about aspects of your health that might relate to your own risk of cancer, as well as information about screening tests and procedures you may have had. If you are younger than 18 years old, please have an adult help you to make sure that your answers are complete.  
        </p>	
        <p>
          Completing the questions that follow takes about 45 minutes. Completing this questionnaire is voluntary. Your answers to these questions will help in our research effort. Since answering these questions might involve thinking about how Li-Fraumeni Syndrome has affected yourself and your family, it is possible that it might cause you to feel sad. You will have an opportunity to discuss these feelings with our clinic staff at the time of your visit. If you need to contact us, please call 1-800-518-8474.  
        </p>
        <!--
					<sp-widget widget="c.data.widget_0"></sp-widget>
				-->
      </div>
    </uib-tab>
    <uib-tab index="1" heading="Demographic Information">
      <div style="padding: 10px;">
        <sp-widget widget="c.data.widget_1"></sp-widget>
      </div>
    </uib-tab>
    <uib-tab index="2" heading="Prior Medical History and Medication Use">
      <div id="submit_div" style="padding: 10px;">
        <sp-widget widget="c.data.widget_2"></sp-widget>
        <widget id="fcsms_iiq_form_biopsy_list"></widget>
      </div>
    </uib-tab>
  </uib-tabset>
</div>]]></template>
    </sp_widget>
</record_update>
